<!doctype html>
<HTML>
  <HEAD>
    <TITLE>add new document</TITLE>
    <link rel="stylesheet" href="/css/default.css">
    <script src="/js/ext/axios.min.js"></script>
    <script src="/js/entity.js" type="text/javascript" ></script>
  </HEAD>
  <BODY>

    <h2>Add New Document</h2>
    <%= erb :nav, { :locals => { :page => 'new document'} } %>
    <div class="layout">
      <table class="documentdetail">
      <tr>
      <td class='advice' colspan='2'>Warning: account numbers are shown in this screen so be careful if you are accessing this site in a public place.</td>
      </tr>
      <tr>
        <td>


          <div>Document Type:</div>
          <div>
            <select class='sender_field mandatory' id="doctypes" name="doc_type_id">
            <option value=''> - Please select - </option>
            <% @doctypes.each do |doctype| %>
            <option value="<%= doctype.id %>"><%= doctype.name %></option>
            <% end %>
            </select>
          </div>

          <div>Sender:</div>
          <div>
            <select class='sender_field mandatory' id="senders" onChange="fetchSenderAccounts(this.value)" name="sender_id">
            <option value=''> - Please select - </option>
            <% @senders.each do |sender| %>
            <option value="<%= sender.id %>"><%= sender.name %></option>
            <% end %>
            </select>
          </div>
          <div>Sender account:</div>
          <div>
            <select class='sender_field' id="senderaccounts" name="sender_account_id">
            <option value="">- none -</option>
            </select>
          </div>

          <div>Summary:</div>
          <input name="summary" class='sender_field' />
          </div>

        </td>
        <td>
          <table class='dates'>
            <tr>
              <td><label>Received</label> *</td><td><input class='sender_field mandatory' type="date" id='date_received' name="received_date" /></td>
            </tr>
            <tr>
              <td><label>Date Due</label></td><td><input class='sender_field' type="date" name="due_date"/></td>
            </tr>
            <tr>
              <td><label>Date Paid</label></td><td><input class='sender_field' type="date" name="paid_date"/></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
        <div><label>Receipt photo/PDF:</label></div>
        <div class="advice">(Please save the document first)</div>
        <div><label>Comments:</label></div>
        <div><textarea name='comments' class='sender_field' rows='5'></textarea></div>
        </td>
      </tr>
      <tr>
        <td>
          <button onClick="addDocument()">add document</button>
        </td>
      </table>
    </div>
    <script type='text/javascript'>
    const rd = document.getElementById('date_received')
    rd.value = getToday()
    </script>
  </BODY>
</HTML>
