<!doctype html>
<HTML>
  <HEAD>
    <TITLE>view/edit senders</TITLE>
    <link rel="stylesheet" href="/css/default.css">
    <script src="/js/ext/axios.min.js"></script>
    <script src="/js/entity.js" type="text/javascript" ></script>
  </HEAD>
  <BODY>

    <h2>Sender</h2>
    <div class="layout" id="doctype_section">
      <table class="senderdetail">
      <tr>
        <td colspan='4'><b><%= @sender.name %></b></td>
      </tr>
      <tr>
        <td><label>Username</label><span class='optional'> (optional)</span>: </td><td colspan='2'><input name="username" class='sender_field' value='<%= @sender.username %>'/></td><td>&nbsp;</td>
      </tr>
      <tr>
        <td><label>Password hint</label><span class='optional'> (optional): </span></td><td colspan='2'><input name="password_hint" class='sender_field' value='<%= @sender.password_hint %>'/></td><td>&nbsp;</td>
      </tr>
      <% if @sender.sender_accounts.size > 0 %>
        <% @sender.sender_accounts.each_with_index do |account, index| %>
          <tr>
            <td colspan='3'>
              <div class='sender_account' id='account_<%= account.id %>'>
                <div>
                                <input type="hidden" name="id" class='fieldval' value="<%= account.id %>" />
                  <%= index+1 %> - Account number: <input name="account_number" class='fieldval' value="<%= account.account_number %>" />
                </div>
                <div>
                  <%= index+1 %> - Account details: <input name="account_details" class='fieldval' value="<%= account.account_details %>" />
                </div>
                <div>
                  <%= index+1 %> - Comments: <textarea name='account_comments' class='fieldval' ><%= account.comments %></textarea>
                </div>
              </div>
            </td>
            <td><button class="update_btn" onClick="updateAccount('account_<%= account.id %>')">update account</button>
            <br/>
            <button class="delete_btn" onClick="deleteAccount('<%= account.id %>')">DELETE account</button>
            </td>
          </tr>
        <% end %>
      <% end %>
      <tr>
        <td colspan='4'><button onClick="toggleShowAccount()">Add an account</button></td>
      </tr>
      <tr id="newaccount" class="hidden">
          <td colspan='3'>
            <div class='sender_account' id='account_new'>
              <div>
                + - Account number: <input name="account_number" class='fieldval' value="" />
              </div>
              <div>
                + - Account details: <input name="account_details" class='fieldval' value="" />
              </div>
              <div>
                + - Comments: <textarea name='account_comments' class='fieldval' ></textarea>
              </div>
            </div>
          </td>
          <td><button onClick="addAccount(<%= @sender.id %>)">add account</button></td>
      </tr>
      <tr>
        <td><label>Comments</label></td><td colspan='3'><textarea class='sender_field' name='comments'><%= @sender.comments %></textarea></td>
      </tr>
      <tr>
        <td colspan='4'>
          <button onClick="updateSender(<%= @sender.id %>)">update sender</button>
          <button onClick="go('/senders')">back to list</button>
        </td>
      </table>
    </div>
  </BODY>
</HTML>
