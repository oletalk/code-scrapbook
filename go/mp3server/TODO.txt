
PRE-DEPLOYMENT LIST:
 * gather list of panics - when is it valid for the service to panic?
   - dbhandle.go: in getting a connection for any query <---
        - (2026/02/10) now returns error which will propagate
   - caching.go: calling manage_cache (separate thread) at startup
   - main.go: failure to startup an http server at startup
 * record stat - check out record_stat.sql in streamv3 project
 * record only when we think 95% (or so) of the tune has played

OLD LIST:
* DONE create data model
* DONE fetch data from db tables
* DONE generate playlist
* sftp fetch
  -- (DONE) fetch location from db
    -- see https://docs.couchdrop.io/walkthroughs/sftp-recipes/using-sftp-clients/using-sftp-with-golang
  DONE prepend file name with sha1 hash of filehash
    -- see https://golang.google.cn/pkg/crypto/sha1/#pkg-examples
  DONE download file into cache
  DONE also trim cache to maxSize
  -- downsample file too, as part of downloadFile (fetch.go)
  -- see https://zetcode.com/golang/exec-command/
  -- see also https://mojoauth.com/escaping/shell-escaping-in-go/#syntax-and-special-characters-of-shell-escaping-in-go
     -- downsample first and then ServeContent?
     1. on startup, parse command/args from dotenv file
     2. upon each download, run command to generate downsampled file
     3. delete original file (but ensure downsampled file is marked as the cached file)
     4. stream downsampled file
  DONE get file location from hash
  DONE stream file. see https://www.slingacademy.com/article/streaming-large-files-with-go-http/
* don't forget to write tests!
  -- see https://www.gyata.ai/golang/writing-tests
* DONE rest endpoints
  DONE first playlist contents
  DONE then streamed files from cache
  DONE how to find out host header?
